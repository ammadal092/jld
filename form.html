<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>入力に基づく画像表示</title>
    <style>
        img {
            max-width: 500px;
            margin-top: 20px;
        }
        .furigana, .meaning {
            display: none;
            margin-top: 10px;
            color: #333;
        }
        button {
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h1>画像を検索するために漢字を入力してください</h1>
    <form id="kanjiForm">
        <label for="kanji">漢字を入力してください: </label>
        <input type="text" id="kanji" name="kanji" required>
        <button type="submit">検索</button>
    </form>

    <h2>検索結果:</h2>
    <div id="imageResults"></div>

    <!-- Furiganaと意味の表示/非表示 -->
    <div id="furiganaResults">
        <button id="showFurigana">ふりがなを表示</button>
        <div class="furigana" id="furiganaText"></div>
    </div>
    
    <div id="meaningResults">
        <button id="showMeaning">意味を表示</button>
        <div class="meaning" id="meaningText"></div>
    </div>

    <script>
        document.getElementById('kanjiForm').addEventListener('submit', function(event) {
    event.preventDefault();

    var inputKanji = document.getElementById('kanji').value.trim();
    var imageContainer = document.getElementById('imageResults');
    imageContainer.innerHTML = '';

    var folderPath = '漢字/';
    var foundImages = [];
    var totalToCheck = 0;
    var totalChecked = 0;

    const maxSuffix = 10; // Ganti sesuai kebutuhan, misalnya 50 untuk sampai xxx050
    const extensions = ['.png', '.jpg'];

    // Fungsi untuk cek dan load gambar
    function checkImage(path) {
        totalToCheck++;
        var img = new Image();
        img.src = path;

        img.onload = function () {
            foundImages.push(path);
            checkDone();
        };

        img.onerror = function () {
            checkDone();
        };
    }

    function checkDone() {
        totalChecked++;
        if (totalChecked === totalToCheck) {
            displayImages(foundImages);
        }
    }

    // Mulai pencarian: input asli + tambahan angka 001, 002, dst.
    for (var ext of extensions) {
        // Cek file utama: 横.png dan 横.jpg
        checkImage(folderPath + inputKanji + ext);

        // Cek file dengan tambahan angka: 横001.png, 横002.jpg, dst.
        for (let i = 1; i <= maxSuffix; i++) {
            let num = String(i).padStart(3, '0');
            checkImage(folderPath + inputKanji + num + ext);
        }
    }

    // Menampilkan semua gambar yang ditemukan
    function displayImages(images) {
        if (images.length === 0) {
            imageContainer.innerHTML = `<p style="color:red;">漢字「${inputKanji}」の画像は見つかりませんでした。</p>`;
        } else {
            images.forEach(function(image) {
                imageContainer.innerHTML += `<img src="${image}" alt="画像" />`;
            });
        }
    }
});

    </script>

</body>
</html>
